# GTerm - Architecture & Keyboard System Summary

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GTerm Application                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   FRONTEND (Svelte)                     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  App.svelte (Main Container)                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Global Keyboard Handler (Cmd+W, Q, D)  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ keyboardHandler() function             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ Tabs management                        â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                       â”‚                              â”‚  â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚
â”‚  â”‚     â”‚                 â”‚                 â”‚           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”        â”‚  â”‚
â”‚  â”‚  â”‚ Tab 1 â”‚  â”‚    Tab 2     â”‚  â”‚ Tab ... â”‚        â”‚  â”‚
â”‚  â”‚  â”‚(Term) â”‚  â”‚   (Terminal) â”‚  â”‚(SFTP)   â”‚        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â”‚     â”‚              â”‚                â”‚             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚  â”‚Terminal â”‚  â”‚xterm.js  â”‚  â”‚SFTP       â”‚       â”‚  â”‚
â”‚  â”‚  â”‚Componentâ”‚  â”‚(captures â”‚  â”‚Component  â”‚       â”‚  â”‚
â”‚  â”‚  â”‚         â”‚  â”‚ all kbd) â”‚  â”‚           â”‚       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  Sidebar                                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Host list (from hosts store)         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ No keyboard navigation (Click only)  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ Edit/Delete buttons                  â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  HostManager Modal                       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Escape key â†’ Close (Line 139)        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ SSH host form (Add/Edit)             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ No keyboard form nav                 â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  Stores (Svelte)                         â”‚   â”‚  â”‚
â”‚  â”‚  â”œâ”€ tabs.js (Tab state)                     â”‚   â”‚  â”‚
â”‚  â”‚  â”œâ”€ hosts.js (SSH profiles)                 â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€ theme.js (Dark/light)                   â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                               â”‚
â”‚                           â”‚ Tauri invoke()               â”‚
â”‚                           â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           BACKEND (Rust + Tauri 2.0)               â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  main.rs                                          â”‚  â”‚
â”‚  â”‚  â”œâ”€ NO menu system configured                     â”‚  â”‚
â”‚  â”‚  â”œâ”€ NO global shortcut plugin                     â”‚  â”‚
â”‚  â”‚  â”œâ”€ SSH commands (connect, send, resize...)       â”‚  â”‚
â”‚  â”‚  â””â”€ SFTP commands (list, upload, download...)     â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  SSH Module                                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ connection.rs (SSH session handling)          â”‚  â”‚
â”‚  â”‚  â”œâ”€ sftp.rs (File operations)                     â”‚  â”‚
â”‚  â”‚  â””â”€ keygen.rs (Key generation)                    â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚
â”‚  Configuration                                            â”‚
â”‚  â”œâ”€ tauri.conf.json (Window, no menu defined)           â”‚
â”‚  â”œâ”€ capabilities/main.json (Permissions)                â”‚
â”‚  â””â”€ Cargo.toml (Missing: global-shortcut, menu)         â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Keyboard Input Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User Presses Key          â”‚
â”‚   (e.g., Cmd+W)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Is Terminal  â”‚  Yes   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ focused?     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ xterm.js captures   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ Forwards to SSH     â”‚
             â”‚ No              â”‚ (no Cmd shortcuts)  â”‚
             â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Browser      â”‚
      â”‚ keydown      â”‚
      â”‚ event        â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ App.svelte keyboardHandler() â”‚
      â”‚ (Document-level listener)    â”‚
      â”‚                              â”‚
      â”‚ Check:                       â”‚
      â”‚ - e.metaKey (Cmd)           â”‚
      â”‚ - e.shiftKey                â”‚
      â”‚ - e.key                     â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
      â”‚             â”‚
      â–¼             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚Matched â”‚   â”‚Not Matchedâ”‚
  â”‚Shortcutâ”‚   â”‚           â”‚
  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚              â”‚
      â–¼              â–¼
  Prevent   Browser Default
  Default   Action Applies
  (e.preventDefault())
```

---

## Keyboard Shortcut Registration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Component Mounts       â”‚
â”‚  (App.svelte onMount)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Check if already   â”‚
    â”‚ registered?        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ No             â”‚ Yes
     â–¼                â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
  â”‚ Add listener:    â”‚â”‚
  â”‚ document         â”‚â”‚
  â”‚ .addEventListenerâ”‚â”‚
  â”‚ ('keydown',      â”‚â”‚
  â”‚  keyboardHandler)â”‚â”‚
  â”‚                  â”‚â”‚
  â”‚ Set flag = true  â”‚â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
       â”‚              â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Handler Active       â”‚
  â”‚                      â”‚
  â”‚ Ready to intercept   â”‚
  â”‚ keyboard events      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Current Keyboard Shortcuts Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               KEYBOARD SHORTCUTS HIERARCHY                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GLOBAL APP LEVEL (App.svelte - Line 74-98)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Cmd+W       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Close active tab               â”‚
â”‚  Cmd+Q       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Quit application               â”‚
â”‚  Cmd+Shift+D â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Duplicate session              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

COMPONENT LEVEL
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Escape      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Close modal (HostManager)      â”‚
â”‚  Enter       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Select file (SFTP)             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

UI BUTTONS ONLY (No Keyboard)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  â˜° (Menu)    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Toggle sidebar (Click)         â”‚
â”‚  ğŸŒ™ (Moon)   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Toggle theme (Click)           â”‚
â”‚  [Tab] âœ•    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Close tab (Click)              â”‚
â”‚  [New] +    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º New connection (Click)          â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MISSING / NOT IMPLEMENTED
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Cmd+T       âœ— New connection dialog                       â”‚
â”‚  Cmd+N       âœ— New tab/window                              â”‚
â”‚  Cmd+1-9     âœ— Jump to tab #                               â”‚
â”‚  Cmd+Tab     âœ— Next tab                                    â”‚
â”‚  Cmd+â‡§Tab    âœ— Previous tab                                â”‚
â”‚  Cmd+K       âœ— Command palette / host search               â”‚
â”‚  Cmd+F       âœ— Find/Search                                 â”‚
â”‚  Cmd+/       âœ— Toggle sidebar                              â”‚
â”‚  Cmd+,       âœ— Settings/Preferences                        â”‚
â”‚  Cmd+D       âœ— Split pane                                  â”‚
â”‚  Cmd+â‡§E     âœ— Split horizontal                             â”‚
â”‚  F1          âœ— Help / Keyboard reference                   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack - Keyboard Related

```
FRONTEND STACK
â”œâ”€ Framework: Svelte (component-based)
â”œâ”€ Event Handling: DOM standard events
â”œâ”€ State Management: Svelte stores (writable)
â”œâ”€ Build Tool: Vite
â”œâ”€ UI Framework: TailwindCSS
â”œâ”€ Terminal UI: xterm.js (CAPTURES ALL INPUT)
â”‚  â””â”€ Problem: Terminal prevents app-level shortcuts
â””â”€ Dialog System: @tauri-apps/plugin-dialog (click-based)

BACKEND STACK
â”œâ”€ Framework: Tauri 2.0
â”œâ”€ Language: Rust (Tokio async)
â”œâ”€ Window Management: No menu system configured
â”œâ”€ Global Shortcuts: NOT implemented
â”œâ”€ Menu System: NOT implemented
â”œâ”€ File Dialog: Tauri plugin (async)
â”œâ”€ Data Storage: tauri-plugin-store (JSON file)
â””â”€ SSH Engine: ssh2 crate (0.9)

MISSING PLUGINS
â”œâ”€ tauri-plugin-global-shortcut (system-level shortcuts)
â”œâ”€ tauri-plugin-menu (native menus with accelerators)
â””â”€ Custom keyboard mapping library
```

---

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Keyboard Event Triggered            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ keyboardHandler()  â”‚
    â”‚ matches shortcut?  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
    â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cmd+W   â”‚    â”‚ Cmd+Q      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚
     â–¼               â–¼
  handleClose     window.
  Tab()           close()
     â”‚               â”‚
     â–¼               â–¼
  closeTab() â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  (from tabs.js)               â”‚
     â”‚                     (Immediate)
     â–¼
  tabs.update()
  activeTabId.update()
     â”‚
     â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Store subscribers  â”‚
  â”‚ notified           â”‚
  â”‚ (React to change)  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
  UI re-renders with updated tabs
```

---

## File Dependency Graph

```
KEYBOARD FLOW
â”œâ”€ App.svelte (Keyboard handler)
â”‚  â”œâ”€ stores/tabs.js (Tab operations)
â”‚  â”œâ”€ stores/hosts.js (Host/profile data)
â”‚  â””â”€ components/*
â”‚     â”œâ”€ Terminal.svelte (xterm input capture)
â”‚     â”œâ”€ SFTP.svelte (File nav escape)
â”‚     â”œâ”€ Sidebar.svelte (Connection list)
â”‚     â””â”€ HostManager.svelte (Modal)
â”‚
â”œâ”€ src-tauri/src/main.rs (Tauri backend)
â”‚  â””â”€ Tauri commands invoked from frontend
â”‚
â””â”€ src-tauri/tauri.conf.json (No menu section)
```

---

## Comparison: Current vs. Best Practice

```
CURRENT IMPLEMENTATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend-only event handling       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ Simple to understand             â”‚
â”‚ âœ“ Easy to modify                   â”‚
â”‚ âœ“ Works when app has focus         â”‚
â”‚ âœ— Terminal captures all input      â”‚
â”‚ âœ— No system-level shortcuts        â”‚
â”‚ âœ— No native menu bar               â”‚
â”‚ âœ— Scattered across components      â”‚
â”‚ âœ— No conflict detection            â”‚
â”‚ âœ— Not customizable by users        â”‚
â”‚ âœ— No help/documentation            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BEST PRACTICE (macOS apps)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Native menu + global shortcuts      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ System-level keyboard intercept  â”‚
â”‚ âœ“ Works even when unfocused        â”‚
â”‚ âœ“ Native menu bar appearance       â”‚
â”‚ âœ“ Customizable by users            â”‚
â”‚ âœ“ Centralized shortcut registry    â”‚
â”‚ âœ“ Conflict detection               â”‚
â”‚ âœ“ User preferences saved           â”‚
â”‚ âœ“ Help/keyboard reference          â”‚
â”‚ âœ— More complex code                â”‚
â”‚ âœ— Requires Rust and Tauri setup    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Enhancement Path

```
PHASE 1 (Easy)
â”œâ”€ Add Cmd+T for new connection
â”œâ”€ Add Cmd+1-9 for tab selection
â”œâ”€ Add Cmd+Tab/Shift+Tab for tab navigation
â”œâ”€ Add Cmd+/ for sidebar toggle
â””â”€ Estimated: 2-3 hours

PHASE 2 (Medium)
â”œâ”€ Implement Tauri menu system
â”œâ”€ Add menu bar items
â”œâ”€ Add accelerators to menu items
â”œâ”€ Add keyboard shortcut display in help
â””â”€ Estimated: 4-6 hours

PHASE 3 (Advanced)
â”œâ”€ Add split pane UI
â”œâ”€ Add split pane keyboard shortcuts
â”œâ”€ Add command palette (Cmd+K)
â”œâ”€ Add host/profile search
â””â”€ Estimated: 8-12 hours

PHASE 4 (Polish)
â”œâ”€ Add settings dialog
â”œâ”€ Allow keyboard shortcut customization
â”œâ”€ Add conflict detection
â”œâ”€ Add visual shortcut reference
â””â”€ Estimated: 6-10 hours
```

---

## Key Findings Summary

1. **Current System**: 3 working shortcuts via document-level event listener
2. **Architecture**: Frontend-only, no Tauri menu or global shortcuts
3. **Terminal Problem**: xterm.js captures keyboard, preventing app shortcuts when focused
4. **No Split Panes**: Tab-based interface only, no split view capability
5. **No Search**: All hosts visible in sidebar, no filtering or search
6. **Extensible**: Well-structured code, ready for enhancements
7. **Quick Wins**: Can add 5-10 shortcuts in 2-3 hours
8. **Long-term**: Needs Tauri menu system + split pane architecture

---

